<!doctype html>
<html lang="ko">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width,initial-scale=1"/>
<title>컬러링북 앱 — 안정판(별/하트 포함) v3</title>
<link rel="stylesheet" href="style.css">
</head>
<body>
<div id="app-container">
  <nav class="main-nav">
    <button id="navGalleryBtn" class="nav-btn active">도안 갤러리</button>
    <button id="navDrawingBtn" class="nav-btn">그리기</button>
    <button id="navSettingsBtn" class="nav-btn">설정</button>
  </nav>
  <div class="view-content">
    <div id="galleryView" class="view active">
      <div><strong>도안</strong></div>
      <div class="row">
        
        <input id="tplFile" type="file" accept="image/*" style="display:none"/>
        <button type="button" id="tplImportBtn" data-adult-text="도안 불러오기" data-child-icon="🖼️">도안 불러오기</button>
      </div>
      <div class="row"> <!-- My URL input and button -->
        <input type="text" id="urlInput" placeholder="도안 URL 입력"/>
        <button type="button" id="urlImportBtn">URL로 불러오기</button>
      </div>
      <div class="row"> <!-- Remote's tplCategory -->
        <label for="tplCategory">카테고리:</label>
        <select id="tplCategory">
          <option value="uncategorized">미분류</option>
          <option value="animals">동물</option>
          <option value="nature">자연</option>
          <option value="objects">사물</option>
          <option value="abstract">추상</option>
        </select>
      </div>
      <div class="row">
        <button type="button" id="saveBtn" data-adult-text="저장" data-child-icon="💾">저장</button>
        <button type="button" id="loadBtn" data-adult-text="불러오기" data-child-icon="📂">불러오기</button>
        <button type="button" id="downloadBtn" title="이미지로 다운로드" data-adult-text="이미지로 다운로드" data-child-icon="⬇️">⬇️</button>
        <button type="button" id="resetBtn" title="앱 리셋" data-adult-text="앱 리셋" data-child-icon="🔄">⟲</button>
      </div>
      <hr/>
      <div><strong>저장된 도안</strong></div>
      <div class="row"> <!-- Remote's pagination -->
        <button type="button" id="prevTemplatePageBtn">이전</button>
        <span id="templatePageInfo">1 / 1</span>
        <button type="button" id="nextTemplatePageBtn">다음</button>
      </div>
      <div class="row" id="templateCategoryButtons"> <!-- Remote's category buttons -->
        <!-- Category buttons will be generated here -->
      </div>
      <div id="templateGallery" class="template-gallery">
        <!-- Templates will be loaded here -->
      </div>
    </div>
    <div id="drawingView" class="view">
      <main class="stage">
        <div class="stage-inner">
          <canvas id="base"></canvas>
          <canvas id="paint"></canvas>
        </div>
      </main>
      <button type="button" id="sidebarToggleBtn">&#9776;</button>
      <aside class="tools-sidebar">
        <div><strong>툴</strong></div>
        <div class="toolbar">
          <button type="button" id="toolBrush" class="active" title="브러시" data-adult-text="브러시" data-child-icon="🖌️">🖌️</button>
          <button type="button" id="toolBucket" title="채우기" data-adult-text="채우기" data-child-icon="🪣">🪣</button>
          <button type="button" id="toolEraser" title="지우개" data-adult-text="지우개" data-child-icon="🧽">🧽</button>
          <button type="button" id="toolPan" title="이동" data-adult-text="이동" data-child-icon="🖐️">🖐️</button>
          <button type="button" id="zoomInBtn" title="확대" data-adult-text="확대" data-child-icon="➕">➕</button>
          <button type="button" id="zoomOutBtn" title="축소" data-adult-text="축소" data-child-icon="➖">➖</button>
          <button type="button" id="resetViewBtn" title="뷰 리셋" data-adult-text="원래대로" data-child-icon="🎯">원래대로</button>
          <button type="button" id="undoBtn" title="되돌리기" data-adult-text="되돌리기" data-child-icon="↩︎">↩︎</button>
          <button type="button" id="redoBtn" title="다시하기" data-adult-text="다시하기" data-child-icon="↪︎">↪︎</button>
        </div>
        <div class="row"><label for="size">굵기</label><input id="size" type="range" min="1" max="60" value="18"/></div>
        <div class="row"><label for="opacity">투명도</label><input id="opacity" type="range" min="0" max="100" step="1" value="100"/></div>
        <div class="row adult-mode-only">
          <label for="color">색상</label><input id="color" type="color" value="#ff7b00"/>
        </div>
        <div class="row child-mode-only" id="childColorPalette">
          <!-- Child-friendly color swatches will be generated here by JavaScript -->
        </div>
        <div class="row"><strong>브러시 타입</strong></div>
        <div class="row" id="brushBar"></div>
        <div class="row"><strong>패턴</strong></div>
        <div class="row" id="patternBar"></div>
        <div class="row"><label><input id="bucketPattern" type="checkbox" checked/> 채우기도 패턴 사용</label></div>
        <div class="row">
          <button type="button" id="clearPaintBtn" data-adult-text="지우기(채색만)" data-child-icon="🧹">지우기(채색만)</button>
          <button type="button" id="wipeAllBtn" data-adult-text="전체 삭제(백지)" data-child-icon="🗑️">전체 삭제(백지)</button>
        </div>
      </aside>
    </div>
    <div id="settingsView" class="view">
      <div class="status" id="status">상태: 준비</div>
      <div class="row">
        <button type="button" id="modeToggleBtn">어린이 모드</button>
      </div>
    </div>
  </div>
</div>



<script src="script.js" defer></script>
<script type="module" src="ui.js" defer></script>
  <div id="templateModal" class="modal">
    <div class="modal-content">
      <span class="close-button" id="closeButton">&times;</span>
      <img id="modalImage" src="" alt="Selected Template">
      <button type="button" id="loadTemplateFromModalBtn">도안 불러오기</button> <!-- New button -->
    </div>
  </div>

  <div id="toast-container"></div>
  <div id="loading-overlay">
    <div class="spinner"></div>
    <p>로딩 중...</p>
  </div>
</body>
</html>